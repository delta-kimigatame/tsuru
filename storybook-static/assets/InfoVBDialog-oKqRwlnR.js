import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{a as d,C as D,b}from"./Close-BvlVWmmo.js";import{r as x,R as r}from"./index-iNOV5qWA.js";import{C as I}from"./CharacterInfo-C03uFKTp.js";import{L as n}from"./Logging-BGLwk1OE.js";import{u as B}from"./musicProjectStore-BsvuTYmn.js";import{E as S}from"./EncodingMapping-C3KwdS0E.js";import{E as h}from"./EncodingSelect-CmSZnD0r.js";import{T as C}from"./TextTabs-Cra1w8j0.js";import{u as V}from"./useTranslation-C2ldOi4s.js";import{D as j}from"./DialogTitle-6zbKYUDs.js";import{I as v}from"./IconButton-B-lYMn6i.js";import{e as y,g as R,c as A}from"./generateUtilityClasses-DXwt_ASJ.js";import{u as E,s as w,c as T}from"./DefaultPropsProvider-C7n-yi0g.js";import{B as z}from"./Button-DslL7Hsi.js";function O(e){return y("MuiDialogActions",e)}R("MuiDialogActions",["root","spacing"]);const M=e=>{const{classes:i,disableSpacing:s}=e;return T({root:["root",!s&&"spacing"]},O,i)},U=w("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:s}=e;return[i.root,!s.disableSpacing&&i.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),k=x.forwardRef(function(i,s){const a=E({props:i,name:"MuiDialogActions"}),{className:c,disableSpacing:u=!1,...f}=a,l={...a,disableSpacing:u},o=M(l);return t.jsx(U,{className:A(o.root,c),ownerState:l,ref:s,...f})}),F=e=>{const{t:i}=V(),[s,a]=r.useState(S.SHIFT_JIS),[c,u]=r.useState(!1),[f,l]=r.useState(!1),{vb:o}=B();r.useEffect(()=>{if(n.debug("vb更新検知","InfoVBDialog"),o===null){n.debug("vbはnull","InfoVBDialog");return}n.info("新しいvbに変更されたため、利用規約への同意状況を初期化しダイアログを開きます。","InfoVBDialog"),u(!1),e.setOpen(!0)},[o]);const m=async()=>{if(o===null){n.debug("vbはnull","InfoVBDialog");return}n.info(`${s}に基づきVBを再度initialize`,"InfoVBDialog"),await o.initialize(s),n.info(`${s}に基づきVBをinitialize完了`,"InfoVBDialog"),l(!1)};r.useEffect(()=>{n.debug("文字コードの変更検知","InfoVBDialog"),l(!0),m()},[s]);const g=()=>{n.info("音源情報ダイアログを閉じる","InfoVBDialog"),e.setOpen(!1)},p=()=>{n.info("音源利用規約に同意しました","InfoVBDialog"),u(!0),n.info("音源情報ダイアログを閉じる","InfoVBDialog"),e.setOpen(!1)};return t.jsx(t.Fragment,{children:t.jsxs(d,{open:e.open&&o!==null,onClose:g,fullScreen:!0,children:[t.jsxs(j,{children:[o!==null&&t.jsx(I,{name:o.name,image:o.image,sample:o.sample,author:o.author,web:o.web,version:o.version,voice:o.voice,otoCount:o.oto.otoCount}),c&&t.jsx(v,{onClick:g,"aria-label":"close",sx:{position:"absolute",right:8,top:8},children:t.jsx(D,{})}),t.jsx(h,{value:s,setValue:a,disabled:f})]}),t.jsx(b,{children:o!==null&&t.jsx(C,{zipFiles:o.zip,encoding:s})}),!c&&t.jsx(k,{children:t.jsx(z,{fullWidth:!0,variant:"contained",color:"primary",onClick:p,size:"large",sx:{mx:1},children:i("infoVBDialog.agreeButton")})})]})})};F.__docgenInfo={description:"",methods:[],displayName:"InfoVBDialog",props:{open:{required:!0,tsType:{name:"boolean"},description:"dialogの開閉状態"},setOpen:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<boolean>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<boolean>",elements:[{name:"boolean"}]}]},description:"dialogの開閉状態を変更するコールバック"}}};export{F as I};
