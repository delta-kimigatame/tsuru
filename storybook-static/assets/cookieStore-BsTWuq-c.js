import{r as E,R as V}from"./index-iNOV5qWA.js";import{d as F}from"./note-PQ4Q7K1Q.js";import{L as Z}from"./Logging-BGLwk1OE.js";import{c as K}from"./react-D0diZGQB.js";const O={mode:"mode",language:"language",colorTheme:"colorTheme",defaultNote:"defaultNote",verticalZoom:"verticalZoom",horizontalZoom:"horizontalZoom"},b={mode:"system",language:"ja",colorTheme:"default",defaultNote:F,verticalZoom:1,horizontalZoom:1};var N={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var A;function q(){if(A)return N;A=1,N.parse=C,N.serialize=d;var e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,o=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,s=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,h=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,g=/^[\u0020-\u003A\u003D-\u007E]*$/;function C(n,l){if(typeof n!="string")throw new TypeError("argument str must be a string");var i={},a=n.length;if(a<2)return i;var w=l&&l.decode||v,c=0,f=0,y=0;do{if(f=n.indexOf("=",c),f===-1)break;if(y=n.indexOf(";",c),y===-1)y=a;else if(f>y){c=n.lastIndexOf(";",f-1)+1;continue}var t=m(n,c,f),S=p(n,f,t),I=n.slice(t,S);if(!r.call(i,I)){var _=m(n,f+1,y),$=p(n,y,_);n.charCodeAt(_)===34&&n.charCodeAt($-1)===34&&(_++,$--);var U=n.slice(_,$);i[I]=T(U,w)}c=y+1}while(c<a);return i}function m(n,l,i){do{var a=n.charCodeAt(l);if(a!==32&&a!==9)return l}while(++l<i);return i}function p(n,l,i){for(;l>i;){var a=n.charCodeAt(--l);if(a!==32&&a!==9)return l+1}return i}function d(n,l,i){var a=i&&i.encode||encodeURIComponent;if(typeof a!="function")throw new TypeError("option encode is invalid");if(!o.test(n))throw new TypeError("argument name is invalid");var w=a(l);if(!s.test(w))throw new TypeError("argument val is invalid");var c=n+"="+w;if(!i)return c;if(i.maxAge!=null){var f=Math.floor(i.maxAge);if(!isFinite(f))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+f}if(i.domain){if(!h.test(i.domain))throw new TypeError("option domain is invalid");c+="; Domain="+i.domain}if(i.path){if(!g.test(i.path))throw new TypeError("option path is invalid");c+="; Path="+i.path}if(i.expires){var y=i.expires;if(!k(y)||isNaN(y.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+y.toUTCString()}if(i.httpOnly&&(c+="; HttpOnly"),i.secure&&(c+="; Secure"),i.partitioned&&(c+="; Partitioned"),i.priority){var t=typeof i.priority=="string"?i.priority.toLowerCase():i.priority;switch(t){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(i.sameSite){var S=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(S){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c}function v(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function k(n){return e.call(n)==="[object Date]"}function T(n,l){try{return l(n)}catch{return n}}return N}var j=q();function J(){const e=typeof global>"u"?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return typeof e=="boolean"?e:typeof document=="object"&&typeof document.cookie=="string"}function B(e){return typeof e=="string"?j.parse(e):typeof e=="object"&&e!==null?e:{}}function P(e,r={}){const o=W(e);if(!r.doNotParse)try{return JSON.parse(o)}catch{}return e}function W(e){return e&&e[0]==="j"&&e[1]===":"?e.substr(2):e}class Y{constructor(r,o={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const h=this.cookies;this.cookies=j.parse(document.cookie),this._checkChanges(h)};const s=typeof document>"u"?"":document.cookie;this.cookies=B(r||s),this.defaultSetOptions=o,this.HAS_DOCUMENT_COOKIE=J()}_emitChange(r){for(let o=0;o<this.changeListeners.length;++o)this.changeListeners[o](r)}_checkChanges(r){new Set(Object.keys(r).concat(Object.keys(this.cookies))).forEach(s=>{r[s]!==this.cookies[s]&&this._emitChange({name:s,value:P(this.cookies[s])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(r,o={}){return o.doNotUpdate||this.update(),P(this.cookies[r],o)}getAll(r={}){r.doNotUpdate||this.update();const o={};for(let s in this.cookies)o[s]=P(this.cookies[s],r);return o}set(r,o,s){s?s=Object.assign(Object.assign({},this.defaultSetOptions),s):s=this.defaultSetOptions;const h=typeof o=="string"?o:JSON.stringify(o);this.cookies=Object.assign(Object.assign({},this.cookies),{[r]:h}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=j.serialize(r,h,s)),this._emitChange({name:r,value:o,options:s})}remove(r,o){const s=o=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),o),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[r],this.HAS_DOCUMENT_COOKIE&&(document.cookie=j.serialize(r,"",s)),this._emitChange({name:r,value:void 0,options:o})}addChangeListener(r){this.changeListeners.push(r),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(r){const o=this.changeListeners.indexOf(r);o>=0&&this.changeListeners.splice(o,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const H=E.createContext(new Y),{Provider:ue,Consumer:le}=H;var x={exports:{}},u={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M;function G(){if(M)return u;M=1;var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,h=e?Symbol.for("react.strict_mode"):60108,g=e?Symbol.for("react.profiler"):60114,C=e?Symbol.for("react.provider"):60109,m=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,v=e?Symbol.for("react.forward_ref"):60112,k=e?Symbol.for("react.suspense"):60113,T=e?Symbol.for("react.suspense_list"):60120,n=e?Symbol.for("react.memo"):60115,l=e?Symbol.for("react.lazy"):60116,i=e?Symbol.for("react.block"):60121,a=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,c=e?Symbol.for("react.scope"):60119;function f(t){if(typeof t=="object"&&t!==null){var S=t.$$typeof;switch(S){case r:switch(t=t.type,t){case p:case d:case s:case g:case h:case k:return t;default:switch(t=t&&t.$$typeof,t){case m:case v:case l:case n:case C:return t;default:return S}}case o:return S}}}function y(t){return f(t)===d}return u.AsyncMode=p,u.ConcurrentMode=d,u.ContextConsumer=m,u.ContextProvider=C,u.Element=r,u.ForwardRef=v,u.Fragment=s,u.Lazy=l,u.Memo=n,u.Portal=o,u.Profiler=g,u.StrictMode=h,u.Suspense=k,u.isAsyncMode=function(t){return y(t)||f(t)===p},u.isConcurrentMode=y,u.isContextConsumer=function(t){return f(t)===m},u.isContextProvider=function(t){return f(t)===C},u.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===r},u.isForwardRef=function(t){return f(t)===v},u.isFragment=function(t){return f(t)===s},u.isLazy=function(t){return f(t)===l},u.isMemo=function(t){return f(t)===n},u.isPortal=function(t){return f(t)===o},u.isProfiler=function(t){return f(t)===g},u.isStrictMode=function(t){return f(t)===h},u.isSuspense=function(t){return f(t)===k},u.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===s||t===d||t===g||t===h||t===k||t===T||typeof t=="object"&&t!==null&&(t.$$typeof===l||t.$$typeof===n||t.$$typeof===C||t.$$typeof===m||t.$$typeof===v||t.$$typeof===a||t.$$typeof===w||t.$$typeof===c||t.$$typeof===i)},u.typeOf=f,u}var D;function Q(){return D||(D=1,x.exports=G()),x.exports}var z,L;function X(){if(L)return z;L=1;var e=Q(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},g={};g[e.ForwardRef]=s,g[e.Memo]=h;function C(l){return e.isMemo(l)?h:g[l.$$typeof]||r}var m=Object.defineProperty,p=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,k=Object.getPrototypeOf,T=Object.prototype;function n(l,i,a){if(typeof i!="string"){if(T){var w=k(i);w&&w!==T&&n(l,w,a)}var c=p(i);d&&(c=c.concat(d(i)));for(var f=C(l),y=C(i),t=0;t<c.length;++t){var S=c[t];if(!o[S]&&!(a&&a[S])&&!(y&&y[S])&&!(f&&f[S])){var I=v(i,S);try{m(l,S,I)}catch{}}}}return l}return z=n,z}X();function ee(){return typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"}function te(e,r){const o=E.useContext(H);if(!o)throw new Error("Missing <CookiesProvider>");const h=Object.assign(Object.assign({},{doNotUpdate:!0}),r),[g,C]=E.useState(()=>o.getAll(h));ee()&&E.useLayoutEffect(()=>{function v(){const k=o.getAll(h);oe()&&C(k)}return o.addChangeListener(v),()=>{o.removeChangeListener(v)}},[o,g]);const m=E.useMemo(()=>o.set.bind(o),[o]),p=E.useMemo(()=>o.remove.bind(o),[o]),d=E.useMemo(()=>o.update.bind(o),[o]);return[g,m,p,d]}function oe(e,r,o){return!0}const re=()=>{const[e,r,o]=te();return{setStringCookie:(m,p,d={path:"/"})=>{r(m,p,d)},setObjectCookie:(m,p,d={path:"/"})=>{r(m,JSON.stringify(p),d)},getStringCookie:(m,p)=>e[m]??p,getObjectCookie:(m,p)=>{const d=e[m];if(typeof d=="object")return d;try{return d?JSON.parse(d):p}catch{return p}},removeCookie:o}},ie=()=>{Z.info("cookieの取得","useProjectCookie");const{getStringCookie:e,setStringCookie:r,getObjectCookie:o,setObjectCookie:s}=re(),h=e(O.mode,b.mode),g=e(O.language,b.language),C=e(O.colorTheme,b.colorTheme),m=o(O.defaultNote,b.defaultNote),p=parseFloat(e(O.verticalZoom,b.verticalZoom.toString())),d=parseFloat(e(O.horizontalZoom,b.horizontalZoom.toString())),v=a=>r(O.mode,a),k=a=>r(O.language,a),T=a=>r(O.colorTheme,a),n=a=>s(O.defaultNote,a),l=a=>{r(O.horizontalZoom,a.toString())},i=a=>{r(O.verticalZoom,a.toString())};return Z.debug(`mode:${h},language:${g},colorTheme:${C},${m},verticalZoom:${p},horizontalZoom:${d}`,"useProjectCookie"),{mode:h,language:g,colorTheme:C,defaultNote:m,verticalZoom:p,horizontalZoom:d,setMode:v,setLanguage:k,setColorTheme:T,setDefaultNote:n,setVerticalZoom:i,setHorizontalZoom:l}},R=K(e=>({mode:b.mode,language:b.language,colorTheme:b.colorTheme,defaultNote:b.defaultNote,verticalZoom:b.verticalZoom,horizontalZoom:b.horizontalZoom,setMode:r=>e(o=>(o.setModeInCookie(r),{mode:r})),setLanguage:r=>e(o=>(o.setLanguageInCookie(r),{language:r})),setColorTheme:r=>e(o=>(o.setColorThemeInCookie(r),{colorTheme:r})),setDefaultNote:r=>e(o=>(o.setDefaultNoteInCookie(r),{defaultNote:r})),setVerticalZoom:r=>{e(o=>(o.setVerticalZoomInCookie(r),{verticalZoom:r}))},setHorizontalZoom:r=>{e(o=>(o.setHorizontalZoomInCookie(r),{horizontalZoom:r}))},setModeInCookie:()=>{},setLanguageInCookie:()=>{},setColorThemeInCookie:()=>{},setDefaultNoteInCookie:()=>{},setVerticalZoomInCookie:()=>{},setHorizontalZoomInCookie:()=>{},isInitialized:!1})),fe=()=>{const e=ie();V.useEffect(()=>{!e||R.getState().isInitialized||R.setState({mode:e.mode,language:e.language,colorTheme:e.colorTheme,defaultNote:e.defaultNote,verticalZoom:e.verticalZoom,horizontalZoom:e.horizontalZoom,setModeInCookie:e.setMode,setLanguageInCookie:e.setLanguage,setColorThemeInCookie:e.setColorTheme,setDefaultNoteInCookie:e.setDefaultNote,setVerticalZoomInCookie:e.setVerticalZoom,setHorizontalZoomInCookie:e.setHorizontalZoom,isInitialized:!0})},[e])};export{fe as a,R as u};
