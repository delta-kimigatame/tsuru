import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{J as A}from"./jszip.min-CqN8Epyx.js";import{r as s}from"./index-iNOV5qWA.js";import{V as k,U as E,T as b}from"./VoiceBank-C9vet1UG.js";import{R as D}from"./resampWorker-CEysAfiK.js";import{d as U}from"./sampledata-dqDZKv4N.js";import{b as W}from"./utils-Cq-m8ugv.js";import"./extractFileFromZip-BLIorQxg.js";import"./readTextFile-BNLodD0O.js";import"./Notenum-DIq-GRnt.js";import"./Logging-BGLwk1OE.js";import"./interp-BFp6dTGs.js";const u=()=>{const[_,f]=s.useState(null),[w,y]=s.useState(!0),[i,v]=s.useState(null),[n,R]=s.useState(void 0);return s.useEffect(()=>{const o=new D;return(async()=>{try{await o.waitUntilReady();const t=new TextDecoder("Shift-JIS"),x={inputWav:"denoise/01_あかきくけこ.wav",targetTone:"A3",velocity:100,flags:"",offsetMs:1538.32,targetMs:600,fixedMs:20,cutoffMs:-200,intensity:100,modulation:0,tempo:"!120",pitches:"AAAA"},c=new A;await c.loadAsync(W(U),{decodeFileName:j=>t.decode(j)});const a=new k(c.files);if(await a.initialize(),!a)throw new Error("VoiceBank instance is not available. Please set it up.");const m=await o.processResamp(x,a);f(m);const g=new E,h=b(44100,16,g.InverseLogicalNormalize(Array.from(m),16)).Output(),S=URL.createObjectURL(new Blob([h],{type:"audio/wav"}));R(S)}catch(t){v(t instanceof Error?t.message:String(t))}finally{y(!1)}})(),()=>{o.terminate()}},[]),e.jsxs("div",{style:{padding:"1rem",fontFamily:"Arial, sans-serif"},children:[e.jsx("h2",{children:"Resamp Worker Demo"}),"このコンポーネントはWorkerの動作を確認するための物であり、プロダクトには含まれていません。",w&&e.jsx("p",{children:"Processing..."}),i&&e.jsxs("p",{style:{color:"red"},children:["Error: ",i]}),n!==void 0&&e.jsx("audio",{src:n,controls:!0})]})},C={title:"90_Workerテスト/resampler",component:u},r=()=>e.jsx(u,{});r.storyName="単純な合成";r.__docgenInfo={description:"",methods:[],displayName:"Default"};var l,p,d;r.parameters={...r.parameters,docs:{...(l=r.parameters)==null?void 0:l.docs,source:{originalSource:"() => <ResampWorkerDemo />",...(d=(p=r.parameters)==null?void 0:p.docs)==null?void 0:d.source}}};const G=["Default"];export{r as Default,G as __namedExportsOrder,C as default};
