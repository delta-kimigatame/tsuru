import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./index-iNOV5qWA.js";import{L as e}from"./Logging-BGLwk1OE.js";import{e as l}from"./extractFileFromZip-BLIorQxg.js";import{r as p}from"./readTextFile-BNLodD0O.js";import{u as f}from"./snackBarStore-cArT9G3j.js";import{g as u}from"./EncodingMapping-C3KwdS0E.js";import{u as T}from"./useTranslation-C2ldOi4s.js";import{B as g}from"./Box-D69FHGj3.js";import{L as b}from"./LinearProgress-BXNRnSQv.js";import{T as F}from"./Typography--QOf8yBx.js";const C=t=>{const{t:m}=T(),[s,i]=a.useState(void 0),o=f();return a.useEffect(()=>{e.debug("ファイル内容もしくはエンコードの変更検知","TextTabContent");let n=!1;if(!t.textFile){e.debug("ファイルはnull","TextTabContent"),i([]);return}return(async()=>{e.info(`音源zipからテキストファイル読み込み。${t.textFile}`,"TextTabContent");try{const x=await l(t.textFile),d=(await p(x,u(t.encoding))).replace(/\r\n/g,`
`).split(`
`);n||(e.info(`音源zipからテキストファイル読み込み完了。${t.textFile}`,"TextTabContent"),i(d))}catch{n||(e.warn(`音源zipからテキストファイル読み込み失敗。${t.textFile}`,"TextTabContent"),i([]),o.setSeverity("error"),o.setValue(m("infoVBDialog.TextTabContent.error")),o.setOpen(!0))}})(),()=>{e.debug("unmount","TextTabContent"),n=!0}},[t.textFile,t.encoding]),r.jsx(g,{sx:{m:1},children:s===void 0?r.jsx(b,{}):r.jsx(F,{variant:"body2","data-testid":"text-content",children:s.map((n,c)=>r.jsxs(a.Fragment,{children:[n,r.jsx("br",{})]},c))})})};C.__docgenInfo={description:`このコンポーネントはInfoVBDialog内において、音源zip内に含まれるテキストファイルを表示するタブ要素の各タブの中身を扱う。
@param props
@returns`,methods:[],displayName:"TextTabContent",props:{textFile:{required:!0,tsType:{name:"JSZip.JSZipObject"},description:"このコンポーネントで表示するzip内のtextファイル"},encoding:{required:!0,tsType:{name:"EncodingOption"},description:"テキストファイルを読み込むための文字コード"}}};export{C as T};
