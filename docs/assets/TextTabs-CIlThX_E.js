import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{r as l,R as x}from"./index-iNOV5qWA.js";import{L as c}from"./Logging-BGLwk1OE.js";import{T as g}from"./TextTabContent-DXzgyQOc.js";import{u as P}from"./useTranslation-C2ldOi4s.js";import{B as v}from"./Box-D69FHGj3.js";import{T as j,a as y}from"./Tabs-CPAcXarj.js";import{e as C,g as F,c as z}from"./generateUtilityClasses-DXwt_ASJ.js";import{d as M,s as I,c as R}from"./DefaultPropsProvider-C7n-yi0g.js";import{a as $}from"./resolveProps-BxfXLv92.js";import{g as E}from"./getThemeProps-Cyw7R1y9.js";import{u as S}from"./useTheme-BMUBEho4.js";function U({props:e,name:t,defaultTheme:n,themeId:a}){let r=S(n);return r=r[a]||r,E({theme:r,name:t,props:e})}function k({props:e,name:t}){return U({props:e,name:t,defaultTheme:M,themeId:$})}const f=l.createContext(null);function B(){const[e,t]=l.useState(null);return l.useEffect(()=>{t(`mui-p-${Math.round(Math.random()*1e5)}`)},[]),e}function L(e){const{children:t,value:n}=e,a=B(),r=l.useMemo(()=>({idPrefix:a,value:n}),[a,n]);return i.jsx(f.Provider,{value:r,children:t})}function O(){return l.useContext(f)}function q(e,t){const{idPrefix:n}=e;return n===null?null:`${e.idPrefix}-P-${t}`}function w(e,t){const{idPrefix:n}=e;return n===null?null:`${e.idPrefix}-T-${t}`}function J(e){return C("MuiTabPanel",e)}F("MuiTabPanel",["root","hidden"]);const N=e=>{const{classes:t,hidden:n}=e;return R({root:["root",n&&"hidden"]},J,t)},W=I("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(3)})),Z=l.forwardRef(function(t,n){const a=k({props:t,name:"MuiTabPanel"}),{children:r,className:d,value:s,keepMounted:o=!1,...m}=a,p={...a},T=N(p),u=O();if(u===null)throw new TypeError("No TabContext provided");const b=q(u,s),h=w(u,s);return i.jsx(W,{"aria-labelledby":h,className:z(T.root,d),hidden:s!==u.value,id:b,ref:n,role:"tabpanel",ownerState:p,...m,children:(o||s===u.value)&&r})}),D=e=>{const{t}=P(),[n,a]=x.useState(0),r=x.useMemo(()=>{if(c.debug("zipファイルの更新検知","TextTabs"),!e.zipFiles){c.debug("zipファイルはnull","TextTabs");return}const s=Object.keys(e.zipFiles),o=s.filter(m=>V(m));return s.includes("readme.txt")&&o.unshift("readme.txt"),c.info(`zip内、音源ルート以下のテキストファイル一覧:${o}`,"TextTabs"),o},[e.zipFiles]),d=(s,o)=>{c.debug(`タブの変更。${o}`,"TextTabs"),a(o)};return i.jsx(i.Fragment,{children:r===void 0?i.jsx(v,{sx:{m:1},children:t("infoVBDialog.TextTabs.notFound")}):i.jsx(i.Fragment,{children:i.jsxs(L,{value:n,children:[i.jsx(j,{value:n,onChange:d,variant:"scrollable",scrollButtons:"auto","aria-label":"textfile tabs",children:r.map((s,o)=>i.jsx(y,{label:s,value:o}))}),r.map((s,o)=>i.jsx(Z,{value:o,children:i.jsx(g,{textFile:e.zipFiles[s],encoding:e.encoding})},s))]})})})},V=e=>e.endsWith(".txt")&&!e.endsWith("readme.txt")&&!e.endsWith("character.txt")&&!e.endsWith("install.txt");D.__docgenInfo={description:`InfoVBDialogにおいて、zip内に含まれるテキストを表示するためのタブ
rootにreadme.txtが含まれる場合defaultの要素として表示する。
character.txtとinstall.txtはUTAUの設定ファイルのため表示しない。
@param props
@returns`,methods:[],displayName:"TextTabs",props:{zipFiles:{required:!0,tsType:{name:"signature",type:"object",raw:"{ [key: string]: JSZip.JSZipObject }",signature:{properties:[{key:{name:"string"},value:{name:"JSZip.JSZipObject",required:!0}}]}},description:`音声ライブラリを構成するzip
root以下に含まれるファイル情報のみにフィルタリングされており、
かつkeyはroot空の相対パスとなっている。

なお、VoiceBank関数はcharacter.txtがあるパスをrootと判定する。`},encoding:{required:!0,tsType:{name:"EncodingOption"},description:"テキストファイルを読み込むための文字コード"}}};export{D as T};
